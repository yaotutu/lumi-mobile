{
  "openapi": "3.1.0",
  "info": {
    "title": "Lumi Server API",
    "description": "AI 图像和 3D 模型生成服务 - 完整的 RESTful API 文档",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "email": "support@lumi.com"
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Bearer Token 认证（Authorization: Bearer <token>）"
      }
    },
    "schemas": {}
  },
  "paths": {
    "/health": {
      "get": {
        "summary": "基础健康检查",
        "tags": ["健康检查"],
        "description": "检查服务是否正常运行",
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": ["ok"]
                        },
                        "timestamp": {
                          "format": "date-time",
                          "type": "string"
                        }
                      },
                      "required": ["status", "timestamp"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/health/detailed": {
      "get": {
        "summary": "详细健康检查",
        "tags": ["健康检查"],
        "description": "检查服务及其依赖（数据库、Redis）的健康状态",
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": ["ok"]
                        },
                        "checks": {
                          "type": "object",
                          "properties": {
                            "database": {
                              "type": "boolean"
                            },
                            "redis": {
                              "type": "boolean"
                            }
                          },
                          "required": ["database", "redis"]
                        },
                        "timestamp": {
                          "format": "date-time",
                          "type": "string"
                        }
                      },
                      "required": ["status", "checks", "timestamp"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "503": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "根路径健康检查",
        "tags": ["健康检查"],
        "description": "返回服务基本信息",
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "service": {
                      "description": "服务名称",
                      "type": "string"
                    },
                    "version": {
                      "description": "版本号",
                      "type": "string"
                    },
                    "status": {
                      "type": "string",
                      "enum": ["running"]
                    }
                  },
                  "required": ["service", "version", "status"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/send-code": {
      "post": {
        "summary": "发送邮箱验证码",
        "tags": ["认证"],
        "description": "向指定邮箱发送验证码，有效期 10 分钟",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "format": "email",
                    "description": "邮箱地址",
                    "type": "string"
                  },
                  "type": {
                    "description": "验证码类型：login(登录) | register(注册) | modify_password(修改密码)",
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": ["login"]
                      },
                      {
                        "type": "string",
                        "enum": ["register"]
                      },
                      {
                        "type": "string",
                        "enum": ["modify_password"]
                      }
                    ]
                  }
                },
                "required": ["email", "type"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "null"
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "400": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "summary": "用户注册",
        "tags": ["认证"],
        "description": "使用邮箱和验证码注册新用户",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "format": "email",
                    "description": "邮箱地址",
                    "type": "string"
                  },
                  "code": {
                    "minLength": 4,
                    "maxLength": 6,
                    "description": "验证码（4-6位）",
                    "type": "string"
                  }
                },
                "required": ["email", "code"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "null"
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "400": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "用户登录",
        "tags": ["认证"],
        "description": "使用邮箱和验证码登录，成功后返回 Bearer Token",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "format": "email",
                    "description": "邮箱地址",
                    "type": "string"
                  },
                  "code": {
                    "minLength": 4,
                    "maxLength": 6,
                    "description": "验证码（4-6位）",
                    "type": "string"
                  }
                },
                "required": ["email", "code"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "description": "Bearer Token（用于后续请求的身份验证）",
                          "type": "string"
                        }
                      },
                      "required": ["token"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "400": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "summary": "获取当前登录用户",
        "tags": ["认证"],
        "description": "通过 Bearer Token 获取当前登录用户信息（包含统计数据）",
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "description": "认证状态：authenticated(已认证) | unauthenticated(未认证) | error(错误)",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["authenticated"]
                            },
                            {
                              "type": "string",
                              "enum": ["unauthenticated"]
                            },
                            {
                              "type": "string",
                              "enum": ["error"]
                            }
                          ]
                        },
                        "user": {
                          "description": "用户信息（未登录时为 null）",
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "description": "用户 ID",
                                  "type": "string"
                                },
                                "email": {
                                  "format": "email",
                                  "description": "邮箱",
                                  "type": "string"
                                },
                                "userName": {
                                  "description": "用户名",
                                  "type": "string"
                                },
                                "nickName": {
                                  "description": "昵称",
                                  "type": "string"
                                },
                                "avatar": {
                                  "description": "头像 URL（可选）",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                },
                                "gender": {
                                  "description": "性别（可选）",
                                  "type": "string"
                                },
                                "stats": {
                                  "description": "用户统计数据",
                                  "type": "object",
                                  "properties": {
                                    "totalModels": {
                                      "minimum": 0,
                                      "description": "总模型数",
                                      "type": "integer"
                                    },
                                    "publicModels": {
                                      "minimum": 0,
                                      "description": "公开模型数",
                                      "type": "integer"
                                    },
                                    "privateModels": {
                                      "minimum": 0,
                                      "description": "私有模型数",
                                      "type": "integer"
                                    },
                                    "totalLikes": {
                                      "minimum": 0,
                                      "description": "获得的总点赞数",
                                      "type": "integer"
                                    },
                                    "totalFavorites": {
                                      "minimum": 0,
                                      "description": "获得的总收藏数",
                                      "type": "integer"
                                    },
                                    "totalViews": {
                                      "minimum": 0,
                                      "description": "获得的总浏览数",
                                      "type": "integer"
                                    },
                                    "totalDownloads": {
                                      "minimum": 0,
                                      "description": "总下载数",
                                      "type": "integer"
                                    },
                                    "likedModelsCount": {
                                      "minimum": 0,
                                      "description": "用户点赞的模型数",
                                      "type": "integer"
                                    },
                                    "favoritedModelsCount": {
                                      "minimum": 0,
                                      "description": "用户收藏的模型数",
                                      "type": "integer"
                                    },
                                    "totalRequests": {
                                      "minimum": 0,
                                      "description": "总生成请求数",
                                      "type": "integer"
                                    },
                                    "completedRequests": {
                                      "minimum": 0,
                                      "description": "已完成的请求数",
                                      "type": "integer"
                                    },
                                    "failedRequests": {
                                      "minimum": 0,
                                      "description": "失败的请求数",
                                      "type": "integer"
                                    }
                                  },
                                  "required": [
                                    "totalModels",
                                    "publicModels",
                                    "privateModels",
                                    "totalLikes",
                                    "totalFavorites",
                                    "totalViews",
                                    "totalDownloads",
                                    "likedModelsCount",
                                    "favoritedModelsCount",
                                    "totalRequests",
                                    "completedRequests",
                                    "failedRequests"
                                  ],
                                  "title": "UserStatsEntity"
                                }
                              },
                              "required": ["id", "userName", "nickName"]
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": ["status", "user"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "summary": "登出",
        "tags": ["认证"],
        "description": "注销当前登录会话",
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "null"
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/users/favorites": {
      "get": {
        "summary": "获取用户收藏的模型列表",
        "tags": ["用户"],
        "description": "获取当前登录用户收藏的所有 3D 模型（需要 Bearer Token）",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "每页数量（默认 20）"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "offset",
            "required": false,
            "description": "偏移量（默认 0）"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "description": "3D 模型实体",
                        "type": "object",
                        "properties": {
                          "id": {
                            "description": "模型 ID",
                            "type": "string"
                          },
                          "externalUserId": {
                            "description": "所属用户 ID",
                            "type": "string"
                          },
                          "source": {
                            "description": "模型来源",
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": ["AI_GENERATED"]
                              },
                              {
                                "type": "string",
                                "enum": ["USER_UPLOADED"]
                              }
                            ],
                            "title": "ModelSource"
                          },
                          "requestId": {
                            "description": "关联的生成请求 ID (AI 生成时)",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "sourceImageId": {
                            "description": "来源图片 ID (AI 生成时)",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "name": {
                            "description": "模型名称",
                            "type": "string"
                          },
                          "description": {
                            "description": "模型描述",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "modelUrl": {
                            "description": "模型文件 URL",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "mtlUrl": {
                            "description": "MTL 材质文件 URL (OBJ 格式)",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "textureUrl": {
                            "description": "纹理图片 URL (OBJ 格式)",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "previewImageUrl": {
                            "description": "预览图 URL",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "format": {
                            "default": "OBJ",
                            "description": "模型格式",
                            "type": "string"
                          },
                          "fileSize": {
                            "description": "文件大小 (字节)",
                            "anyOf": [
                              {
                                "minimum": 0,
                                "type": "integer"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "visibility": {
                            "description": "模型可见性",
                            "anyOf": [
                              {
                                "type": "string",
                                "enum": ["PRIVATE"]
                              },
                              {
                                "type": "string",
                                "enum": ["PUBLIC"]
                              }
                            ],
                            "title": "ModelVisibility"
                          },
                          "publishedAt": {
                            "description": "发布时间",
                            "anyOf": [
                              {
                                "format": "date-time",
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "viewCount": {
                            "minimum": 0,
                            "default": 0,
                            "description": "浏览次数",
                            "type": "integer"
                          },
                          "likeCount": {
                            "minimum": 0,
                            "default": 0,
                            "description": "点赞数",
                            "type": "integer"
                          },
                          "favoriteCount": {
                            "minimum": 0,
                            "default": 0,
                            "description": "收藏数",
                            "type": "integer"
                          },
                          "downloadCount": {
                            "minimum": 0,
                            "default": 0,
                            "description": "下载次数",
                            "type": "integer"
                          },
                          "sliceTaskId": {
                            "description": "切片任务 ID",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "printStatus": {
                            "description": "打印状态",
                            "anyOf": [
                              {
                                "description": "打印状态",
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "enum": ["NOT_STARTED"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["SLICING"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["SLICE_COMPLETE"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["PRINTING"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["PRINT_COMPLETE"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["FAILED"]
                                  }
                                ],
                                "title": "PrintStatus"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "createdAt": {
                            "format": "date-time",
                            "description": "创建时间",
                            "type": "string"
                          },
                          "updatedAt": {
                            "format": "date-time",
                            "description": "更新时间",
                            "type": "string"
                          },
                          "completedAt": {
                            "description": "完成时间",
                            "anyOf": [
                              {
                                "format": "date-time",
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "failedAt": {
                            "description": "失败时间",
                            "anyOf": [
                              {
                                "format": "date-time",
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "errorMessage": {
                            "description": "错误信息",
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "externalUserId",
                          "source",
                          "requestId",
                          "sourceImageId",
                          "name",
                          "description",
                          "modelUrl",
                          "mtlUrl",
                          "textureUrl",
                          "previewImageUrl",
                          "format",
                          "fileSize",
                          "visibility",
                          "publishedAt",
                          "viewCount",
                          "likeCount",
                          "favoriteCount",
                          "downloadCount",
                          "sliceTaskId",
                          "printStatus",
                          "createdAt",
                          "updatedAt",
                          "completedAt",
                          "failedAt",
                          "errorMessage"
                        ],
                        "title": "ModelEntity"
                      }
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{id}": {
      "get": {
        "summary": "获取指定用户信息",
        "tags": ["用户"],
        "description": "获取指定 ID 的用户详细信息（需要 Bearer Token）",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "description": "用户实体",
                      "type": "object",
                      "properties": {
                        "id": {
                          "description": "用户 ID",
                          "type": "string"
                        },
                        "email": {
                          "format": "email",
                          "description": "邮箱",
                          "type": "string"
                        },
                        "userName": {
                          "description": "用户名",
                          "type": "string"
                        },
                        "nickName": {
                          "description": "昵称",
                          "type": "string"
                        },
                        "avatar": {
                          "description": "头像 URL",
                          "anyOf": [
                            {
                              "format": "uri",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "gender": {
                          "description": "性别",
                          "type": "string"
                        }
                      },
                      "required": ["id", "email", "userName", "nickName", "avatar", "gender"],
                      "title": "UserEntity"
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "400": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "404": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/users/update": {
      "post": {
        "summary": "更新用户信息",
        "tags": ["用户"],
        "description": "更新用户的昵称、头像、性别等信息（需要 Bearer Token）",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "description": "用户 ID",
                    "type": "string"
                  },
                  "nick_name": {
                    "description": "昵称",
                    "type": "string"
                  },
                  "avatar": {
                    "format": "uri",
                    "description": "头像 URL",
                    "type": "string"
                  },
                  "gender": {
                    "description": "性别",
                    "type": "string"
                  }
                },
                "required": ["id"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "提示信息",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "code": {
                          "type": "string"
                        }
                      },
                      "required": ["message", "code"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/users/modify-password": {
      "post": {
        "summary": "修改密码",
        "tags": ["用户"],
        "description": "修改用户登录密码（需要 Bearer Token）",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "description": "用户 ID",
                    "type": "string"
                  },
                  "old_password": {
                    "description": "旧密码",
                    "type": "string"
                  },
                  "new_password": {
                    "minLength": 6,
                    "description": "新密码（最少 6 位）",
                    "type": "string"
                  },
                  "repassword": {
                    "description": "确认新密码",
                    "type": "string"
                  },
                  "random_code": {
                    "description": "验证码",
                    "type": "string"
                  }
                },
                "required": ["id", "new_password", "repassword", "random_code"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "提示信息",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "code": {
                          "type": "string"
                        }
                      },
                      "required": ["message", "code"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/proxy/image": {
      "get": {
        "summary": "图片代理",
        "tags": ["代理"],
        "description": "通过服务端代理访问图片资源（解决跨域问题）",
        "parameters": [
          {
            "schema": {
              "format": "uri",
              "type": "string"
            },
            "in": "query",
            "name": "url",
            "required": true,
            "description": "原始图片 URL"
          }
        ],
        "responses": {
          "200": {
            "description": "图片二进制数据",
            "headers": {
              "type": {
                "schema": {
                  "0": "o",
                  "1": "b",
                  "2": "j",
                  "3": "e",
                  "4": "c",
                  "5": "t"
                }
              },
              "properties": {
                "schema": {
                  "content-type": {
                    "description": "图片 MIME 类型",
                    "type": "string"
                  },
                  "cache-control": {
                    "type": "string"
                  }
                }
              },
              "required": {
                "schema": {
                  "0": "content-type",
                  "1": "cache-control"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "description": "图片二进制数据",
                  "type": "object",
                  "properties": {}
                }
              }
            }
          }
        }
      }
    },
    "/api/proxy/model": {
      "get": {
        "summary": "模型文件代理",
        "tags": ["代理"],
        "description": "通过服务端代理访问 3D 模型文件（解决跨域问题）",
        "parameters": [
          {
            "schema": {
              "format": "uri",
              "type": "string"
            },
            "in": "query",
            "name": "url",
            "required": true,
            "description": "原始模型文件 URL"
          }
        ],
        "responses": {
          "200": {
            "description": "模型文件二进制数据",
            "headers": {
              "type": {
                "schema": {
                  "0": "o",
                  "1": "b",
                  "2": "j",
                  "3": "e",
                  "4": "c",
                  "5": "t"
                }
              },
              "properties": {
                "schema": {
                  "content-type": {
                    "description": "文件 MIME 类型",
                    "type": "string"
                  },
                  "cache-control": {
                    "type": "string"
                  }
                }
              },
              "required": {
                "schema": {
                  "0": "content-type",
                  "1": "cache-control"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "description": "模型文件二进制数据",
                  "type": "object",
                  "properties": {}
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks": {
      "get": {
        "summary": "获取任务列表",
        "tags": ["任务"],
        "description": "分页获取当前用户的生成任务列表",
        "parameters": [
          {
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "type": "integer"
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "每页数量 (1-100，默认 20)"
          },
          {
            "schema": {
              "minimum": 0,
              "default": 0,
              "type": "integer"
            },
            "in": "query",
            "name": "offset",
            "required": false,
            "description": "偏移量 (默认 0)"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 列表响应（带总数）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 列表响应（带总数）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "items": {
                          "description": "数据列表",
                          "type": "array",
                          "items": {
                            "description": "包含图片的生成任务",
                            "type": "object",
                            "allOf": [
                              {
                                "description": "生成任务实体",
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "description": "任务 ID",
                                    "type": "string"
                                  },
                                  "externalUserId": {
                                    "description": "外部用户 ID",
                                    "type": "string"
                                  },
                                  "originalPrompt": {
                                    "description": "用户原始输入的提示词",
                                    "anyOf": [
                                      {
                                        "type": "string"
                                      },
                                      {
                                        "type": "null"
                                      }
                                    ]
                                  },
                                  "status": {
                                    "description": "请求状态",
                                    "anyOf": [
                                      {
                                        "type": "string",
                                        "enum": ["IMAGE_PENDING"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["IMAGE_GENERATING"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["IMAGE_COMPLETED"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["IMAGE_FAILED"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["MODEL_PENDING"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["MODEL_GENERATING"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["MODEL_COMPLETED"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["MODEL_FAILED"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["COMPLETED"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["FAILED"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["CANCELLED"]
                                      }
                                    ],
                                    "title": "RequestStatus"
                                  },
                                  "phase": {
                                    "description": "请求阶段",
                                    "anyOf": [
                                      {
                                        "type": "string",
                                        "enum": ["IMAGE_GENERATION"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["AWAITING_SELECTION"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["MODEL_GENERATION"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["COMPLETED"]
                                      }
                                    ],
                                    "title": "RequestPhase"
                                  },
                                  "selectedImageIndex": {
                                    "description": "用户选择的图片索引 (0-3)",
                                    "anyOf": [
                                      {
                                        "minimum": 0,
                                        "maximum": 3,
                                        "type": "integer"
                                      },
                                      {
                                        "type": "null"
                                      }
                                    ]
                                  },
                                  "createdAt": {
                                    "format": "date-time",
                                    "description": "创建时间",
                                    "type": "string"
                                  },
                                  "updatedAt": {
                                    "format": "date-time",
                                    "description": "更新时间",
                                    "type": "string"
                                  },
                                  "completedAt": {
                                    "description": "完成时间",
                                    "anyOf": [
                                      {
                                        "format": "date-time",
                                        "type": "string"
                                      },
                                      {
                                        "type": "null"
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "id",
                                  "externalUserId",
                                  "originalPrompt",
                                  "status",
                                  "phase",
                                  "selectedImageIndex",
                                  "createdAt",
                                  "updatedAt",
                                  "completedAt"
                                ],
                                "title": "TaskEntity"
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "images": {
                                    "description": "关联的图片列表 (最多 4 张)",
                                    "type": "array",
                                    "items": {
                                      "description": "生成图片实体",
                                      "type": "object",
                                      "properties": {
                                        "id": {
                                          "description": "图片 ID",
                                          "type": "string"
                                        },
                                        "requestId": {
                                          "description": "所属任务 ID",
                                          "type": "string"
                                        },
                                        "index": {
                                          "minimum": 0,
                                          "maximum": 3,
                                          "description": "图片索引 (0-3)",
                                          "type": "integer"
                                        },
                                        "imageUrl": {
                                          "description": "图片 URL",
                                          "anyOf": [
                                            {
                                              "type": "string"
                                            },
                                            {
                                              "type": "null"
                                            }
                                          ]
                                        },
                                        "imagePrompt": {
                                          "description": "图片生成提示词",
                                          "anyOf": [
                                            {
                                              "type": "string"
                                            },
                                            {
                                              "type": "null"
                                            }
                                          ]
                                        },
                                        "imageStatus": {
                                          "description": "图片状态",
                                          "anyOf": [
                                            {
                                              "type": "string",
                                              "enum": ["PENDING"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["GENERATING"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["COMPLETED"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["FAILED"]
                                            }
                                          ],
                                          "title": "ImageStatus"
                                        },
                                        "createdAt": {
                                          "format": "date-time",
                                          "description": "创建时间",
                                          "type": "string"
                                        },
                                        "completedAt": {
                                          "description": "完成时间",
                                          "anyOf": [
                                            {
                                              "format": "date-time",
                                              "type": "string"
                                            },
                                            {
                                              "type": "null"
                                            }
                                          ]
                                        },
                                        "failedAt": {
                                          "description": "失败时间",
                                          "anyOf": [
                                            {
                                              "format": "date-time",
                                              "type": "string"
                                            },
                                            {
                                              "type": "null"
                                            }
                                          ]
                                        },
                                        "errorMessage": {
                                          "description": "错误信息",
                                          "anyOf": [
                                            {
                                              "type": "string"
                                            },
                                            {
                                              "type": "null"
                                            }
                                          ]
                                        }
                                      },
                                      "required": [
                                        "id",
                                        "requestId",
                                        "index",
                                        "imageUrl",
                                        "imagePrompt",
                                        "imageStatus",
                                        "createdAt",
                                        "completedAt",
                                        "failedAt",
                                        "errorMessage"
                                      ],
                                      "title": "ImageEntity"
                                    }
                                  }
                                },
                                "required": ["images"]
                              }
                            ],
                            "title": "TaskWithImages"
                          }
                        },
                        "total": {
                          "minimum": 0,
                          "description": "总数",
                          "type": "integer"
                        }
                      },
                      "required": ["items", "total"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 错误响应（服务端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 错误响应（服务端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "错误状态（服务端错误）",
                      "type": "string",
                      "enum": ["error"]
                    },
                    "message": {
                      "description": "错误信息",
                      "type": "string"
                    },
                    "code": {
                      "description": "错误代码",
                      "type": "string"
                    },
                    "data": {
                      "description": "附加错误数据"
                    }
                  },
                  "required": ["status", "message"]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "创建生成任务",
        "tags": ["任务"],
        "description": "创建新的图片生成任务",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "description": "创建任务请求",
                "type": "object",
                "properties": {
                  "prompt": {
                    "minLength": 1,
                    "maxLength": 500,
                    "description": "生成提示词 (1-500 字符)",
                    "type": "string"
                  }
                },
                "required": ["prompt"]
              }
            }
          },
          "required": true,
          "description": "创建任务请求"
        },
        "responses": {
          "201": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "description": "生成任务实体",
                      "type": "object",
                      "properties": {
                        "id": {
                          "description": "任务 ID",
                          "type": "string"
                        },
                        "externalUserId": {
                          "description": "外部用户 ID",
                          "type": "string"
                        },
                        "originalPrompt": {
                          "description": "用户原始输入的提示词",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "status": {
                          "description": "请求状态",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["IMAGE_PENDING"]
                            },
                            {
                              "type": "string",
                              "enum": ["IMAGE_GENERATING"]
                            },
                            {
                              "type": "string",
                              "enum": ["IMAGE_COMPLETED"]
                            },
                            {
                              "type": "string",
                              "enum": ["IMAGE_FAILED"]
                            },
                            {
                              "type": "string",
                              "enum": ["MODEL_PENDING"]
                            },
                            {
                              "type": "string",
                              "enum": ["MODEL_GENERATING"]
                            },
                            {
                              "type": "string",
                              "enum": ["MODEL_COMPLETED"]
                            },
                            {
                              "type": "string",
                              "enum": ["MODEL_FAILED"]
                            },
                            {
                              "type": "string",
                              "enum": ["COMPLETED"]
                            },
                            {
                              "type": "string",
                              "enum": ["FAILED"]
                            },
                            {
                              "type": "string",
                              "enum": ["CANCELLED"]
                            }
                          ]
                        },
                        "phase": {
                          "description": "请求阶段",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["IMAGE_GENERATION"]
                            },
                            {
                              "type": "string",
                              "enum": ["AWAITING_SELECTION"]
                            },
                            {
                              "type": "string",
                              "enum": ["MODEL_GENERATION"]
                            },
                            {
                              "type": "string",
                              "enum": ["COMPLETED"]
                            }
                          ]
                        },
                        "selectedImageIndex": {
                          "description": "用户选择的图片索引 (0-3)",
                          "anyOf": [
                            {
                              "minimum": 0,
                              "maximum": 3,
                              "type": "integer"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "createdAt": {
                          "format": "date-time",
                          "description": "创建时间",
                          "type": "string"
                        },
                        "updatedAt": {
                          "format": "date-time",
                          "description": "更新时间",
                          "type": "string"
                        },
                        "completedAt": {
                          "description": "完成时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": [
                        "id",
                        "externalUserId",
                        "originalPrompt",
                        "status",
                        "phase",
                        "selectedImageIndex",
                        "createdAt",
                        "updatedAt",
                        "completedAt"
                      ]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}": {
      "get": {
        "summary": "获取任务详情",
        "tags": ["任务"],
        "description": "获取指定任务的详细信息，包含关联的图片和模型",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "allOf": [
                        {
                          "description": "包含图片的生成任务",
                          "type": "object",
                          "allOf": [
                            {
                              "description": "生成任务实体",
                              "type": "object",
                              "properties": {
                                "id": {
                                  "description": "任务 ID",
                                  "type": "string"
                                },
                                "externalUserId": {
                                  "description": "外部用户 ID",
                                  "type": "string"
                                },
                                "originalPrompt": {
                                  "description": "用户原始输入的提示词",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                },
                                "status": {
                                  "description": "请求状态",
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_PENDING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_GENERATING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_COMPLETED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_FAILED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_PENDING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_GENERATING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_COMPLETED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_FAILED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["COMPLETED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["FAILED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["CANCELLED"]
                                    }
                                  ]
                                },
                                "phase": {
                                  "description": "请求阶段",
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_GENERATION"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["AWAITING_SELECTION"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_GENERATION"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["COMPLETED"]
                                    }
                                  ]
                                },
                                "selectedImageIndex": {
                                  "description": "用户选择的图片索引 (0-3)",
                                  "anyOf": [
                                    {
                                      "minimum": 0,
                                      "maximum": 3,
                                      "type": "integer"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                },
                                "createdAt": {
                                  "format": "date-time",
                                  "description": "创建时间",
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "format": "date-time",
                                  "description": "更新时间",
                                  "type": "string"
                                },
                                "completedAt": {
                                  "description": "完成时间",
                                  "anyOf": [
                                    {
                                      "format": "date-time",
                                      "type": "string"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "externalUserId",
                                "originalPrompt",
                                "status",
                                "phase",
                                "selectedImageIndex",
                                "createdAt",
                                "updatedAt",
                                "completedAt"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "images": {
                                  "description": "关联的图片列表 (最多 4 张)",
                                  "type": "array",
                                  "items": {
                                    "description": "生成图片实体",
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "description": "图片 ID",
                                        "type": "string"
                                      },
                                      "requestId": {
                                        "description": "所属任务 ID",
                                        "type": "string"
                                      },
                                      "index": {
                                        "minimum": 0,
                                        "maximum": 3,
                                        "description": "图片索引 (0-3)",
                                        "type": "integer"
                                      },
                                      "imageUrl": {
                                        "description": "图片 URL",
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "imagePrompt": {
                                        "description": "图片生成提示词",
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "imageStatus": {
                                        "description": "图片状态",
                                        "anyOf": [
                                          {
                                            "type": "string",
                                            "enum": ["PENDING"]
                                          },
                                          {
                                            "type": "string",
                                            "enum": ["GENERATING"]
                                          },
                                          {
                                            "type": "string",
                                            "enum": ["COMPLETED"]
                                          },
                                          {
                                            "type": "string",
                                            "enum": ["FAILED"]
                                          }
                                        ]
                                      },
                                      "createdAt": {
                                        "format": "date-time",
                                        "description": "创建时间",
                                        "type": "string"
                                      },
                                      "completedAt": {
                                        "description": "完成时间",
                                        "anyOf": [
                                          {
                                            "format": "date-time",
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "failedAt": {
                                        "description": "失败时间",
                                        "anyOf": [
                                          {
                                            "format": "date-time",
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "errorMessage": {
                                        "description": "错误信息",
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "requestId",
                                      "index",
                                      "imageUrl",
                                      "imagePrompt",
                                      "imageStatus",
                                      "createdAt",
                                      "completedAt",
                                      "failedAt",
                                      "errorMessage"
                                    ]
                                  }
                                }
                              },
                              "required": ["images"]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "model": {
                              "description": "关联的 3D 模型（如有）",
                              "anyOf": [
                                {
                                  "description": "3D 模型实体",
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "description": "模型 ID",
                                      "type": "string"
                                    },
                                    "externalUserId": {
                                      "description": "所属用户 ID",
                                      "type": "string"
                                    },
                                    "source": {
                                      "description": "模型来源",
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "enum": ["AI_GENERATED"]
                                        },
                                        {
                                          "type": "string",
                                          "enum": ["USER_UPLOADED"]
                                        }
                                      ]
                                    },
                                    "requestId": {
                                      "description": "关联的生成请求 ID (AI 生成时)",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "sourceImageId": {
                                      "description": "来源图片 ID (AI 生成时)",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "name": {
                                      "description": "模型名称",
                                      "type": "string"
                                    },
                                    "description": {
                                      "description": "模型描述",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "modelUrl": {
                                      "description": "模型文件 URL",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "mtlUrl": {
                                      "description": "MTL 材质文件 URL (OBJ 格式)",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "textureUrl": {
                                      "description": "纹理图片 URL (OBJ 格式)",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "previewImageUrl": {
                                      "description": "预览图 URL",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "format": {
                                      "default": "OBJ",
                                      "description": "模型格式",
                                      "type": "string"
                                    },
                                    "fileSize": {
                                      "description": "文件大小 (字节)",
                                      "anyOf": [
                                        {
                                          "minimum": 0,
                                          "type": "integer"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "visibility": {
                                      "description": "模型可见性",
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "enum": ["PRIVATE"]
                                        },
                                        {
                                          "type": "string",
                                          "enum": ["PUBLIC"]
                                        }
                                      ]
                                    },
                                    "publishedAt": {
                                      "description": "发布时间",
                                      "anyOf": [
                                        {
                                          "format": "date-time",
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "viewCount": {
                                      "minimum": 0,
                                      "default": 0,
                                      "description": "浏览次数",
                                      "type": "integer"
                                    },
                                    "likeCount": {
                                      "minimum": 0,
                                      "default": 0,
                                      "description": "点赞数",
                                      "type": "integer"
                                    },
                                    "favoriteCount": {
                                      "minimum": 0,
                                      "default": 0,
                                      "description": "收藏数",
                                      "type": "integer"
                                    },
                                    "downloadCount": {
                                      "minimum": 0,
                                      "default": 0,
                                      "description": "下载次数",
                                      "type": "integer"
                                    },
                                    "sliceTaskId": {
                                      "description": "切片任务 ID",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "printStatus": {
                                      "description": "打印状态",
                                      "anyOf": [
                                        {
                                          "description": "打印状态",
                                          "anyOf": [
                                            {
                                              "type": "string",
                                              "enum": ["NOT_STARTED"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["SLICING"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["SLICE_COMPLETE"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["PRINTING"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["PRINT_COMPLETE"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["FAILED"]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "createdAt": {
                                      "format": "date-time",
                                      "description": "创建时间",
                                      "type": "string"
                                    },
                                    "updatedAt": {
                                      "format": "date-time",
                                      "description": "更新时间",
                                      "type": "string"
                                    },
                                    "completedAt": {
                                      "description": "完成时间",
                                      "anyOf": [
                                        {
                                          "format": "date-time",
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "failedAt": {
                                      "description": "失败时间",
                                      "anyOf": [
                                        {
                                          "format": "date-time",
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "errorMessage": {
                                      "description": "错误信息",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "externalUserId",
                                    "source",
                                    "requestId",
                                    "sourceImageId",
                                    "name",
                                    "description",
                                    "modelUrl",
                                    "mtlUrl",
                                    "textureUrl",
                                    "previewImageUrl",
                                    "format",
                                    "fileSize",
                                    "visibility",
                                    "publishedAt",
                                    "viewCount",
                                    "likeCount",
                                    "favoriteCount",
                                    "downloadCount",
                                    "sliceTaskId",
                                    "printStatus",
                                    "createdAt",
                                    "updatedAt",
                                    "completedAt",
                                    "failedAt",
                                    "errorMessage"
                                  ]
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            }
                          },
                          "required": ["model"]
                        }
                      ]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "选择图片生成 3D 模型",
        "tags": ["任务"],
        "description": "从生成的 4 张图片中选择一张，开始生成 3D 模型",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "description": "选择图片请求",
                "type": "object",
                "properties": {
                  "selectedImageIndex": {
                    "minimum": 0,
                    "maximum": 3,
                    "description": "选择的图片索引 (0-3)",
                    "type": "integer"
                  }
                },
                "required": ["selectedImageIndex"]
              }
            }
          },
          "required": true,
          "description": "选择图片请求"
        },
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "task": {
                          "description": "生成任务实体",
                          "type": "object",
                          "properties": {
                            "id": {
                              "description": "任务 ID",
                              "type": "string"
                            },
                            "externalUserId": {
                              "description": "外部用户 ID",
                              "type": "string"
                            },
                            "originalPrompt": {
                              "description": "用户原始输入的提示词",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "status": {
                              "description": "请求状态",
                              "anyOf": [
                                {
                                  "type": "string",
                                  "enum": ["IMAGE_PENDING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["IMAGE_GENERATING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["IMAGE_COMPLETED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["IMAGE_FAILED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["MODEL_PENDING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["MODEL_GENERATING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["MODEL_COMPLETED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["MODEL_FAILED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["COMPLETED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["FAILED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["CANCELLED"]
                                }
                              ]
                            },
                            "phase": {
                              "description": "请求阶段",
                              "anyOf": [
                                {
                                  "type": "string",
                                  "enum": ["IMAGE_GENERATION"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["AWAITING_SELECTION"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["MODEL_GENERATION"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["COMPLETED"]
                                }
                              ]
                            },
                            "selectedImageIndex": {
                              "description": "用户选择的图片索引 (0-3)",
                              "anyOf": [
                                {
                                  "minimum": 0,
                                  "maximum": 3,
                                  "type": "integer"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "createdAt": {
                              "format": "date-time",
                              "description": "创建时间",
                              "type": "string"
                            },
                            "updatedAt": {
                              "format": "date-time",
                              "description": "更新时间",
                              "type": "string"
                            },
                            "completedAt": {
                              "description": "完成时间",
                              "anyOf": [
                                {
                                  "format": "date-time",
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            }
                          },
                          "required": [
                            "id",
                            "externalUserId",
                            "originalPrompt",
                            "status",
                            "phase",
                            "selectedImageIndex",
                            "createdAt",
                            "updatedAt",
                            "completedAt"
                          ]
                        },
                        "model": {
                          "description": "3D 模型实体",
                          "type": "object",
                          "properties": {
                            "id": {
                              "description": "模型 ID",
                              "type": "string"
                            },
                            "externalUserId": {
                              "description": "所属用户 ID",
                              "type": "string"
                            },
                            "source": {
                              "description": "模型来源",
                              "anyOf": [
                                {
                                  "type": "string",
                                  "enum": ["AI_GENERATED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["USER_UPLOADED"]
                                }
                              ]
                            },
                            "requestId": {
                              "description": "关联的生成请求 ID (AI 生成时)",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "sourceImageId": {
                              "description": "来源图片 ID (AI 生成时)",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "name": {
                              "description": "模型名称",
                              "type": "string"
                            },
                            "description": {
                              "description": "模型描述",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "modelUrl": {
                              "description": "模型文件 URL",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "mtlUrl": {
                              "description": "MTL 材质文件 URL (OBJ 格式)",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "textureUrl": {
                              "description": "纹理图片 URL (OBJ 格式)",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "previewImageUrl": {
                              "description": "预览图 URL",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "format": {
                              "default": "OBJ",
                              "description": "模型格式",
                              "type": "string"
                            },
                            "fileSize": {
                              "description": "文件大小 (字节)",
                              "anyOf": [
                                {
                                  "minimum": 0,
                                  "type": "integer"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "visibility": {
                              "description": "模型可见性",
                              "anyOf": [
                                {
                                  "type": "string",
                                  "enum": ["PRIVATE"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["PUBLIC"]
                                }
                              ]
                            },
                            "publishedAt": {
                              "description": "发布时间",
                              "anyOf": [
                                {
                                  "format": "date-time",
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "viewCount": {
                              "minimum": 0,
                              "default": 0,
                              "description": "浏览次数",
                              "type": "integer"
                            },
                            "likeCount": {
                              "minimum": 0,
                              "default": 0,
                              "description": "点赞数",
                              "type": "integer"
                            },
                            "favoriteCount": {
                              "minimum": 0,
                              "default": 0,
                              "description": "收藏数",
                              "type": "integer"
                            },
                            "downloadCount": {
                              "minimum": 0,
                              "default": 0,
                              "description": "下载次数",
                              "type": "integer"
                            },
                            "sliceTaskId": {
                              "description": "切片任务 ID",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "printStatus": {
                              "description": "打印状态",
                              "anyOf": [
                                {
                                  "description": "打印状态",
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "enum": ["NOT_STARTED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["SLICING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["SLICE_COMPLETE"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["PRINTING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["PRINT_COMPLETE"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["FAILED"]
                                    }
                                  ]
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "createdAt": {
                              "format": "date-time",
                              "description": "创建时间",
                              "type": "string"
                            },
                            "updatedAt": {
                              "format": "date-time",
                              "description": "更新时间",
                              "type": "string"
                            },
                            "completedAt": {
                              "description": "完成时间",
                              "anyOf": [
                                {
                                  "format": "date-time",
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "failedAt": {
                              "description": "失败时间",
                              "anyOf": [
                                {
                                  "format": "date-time",
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "errorMessage": {
                              "description": "错误信息",
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            }
                          },
                          "required": [
                            "id",
                            "externalUserId",
                            "source",
                            "requestId",
                            "sourceImageId",
                            "name",
                            "description",
                            "modelUrl",
                            "mtlUrl",
                            "textureUrl",
                            "previewImageUrl",
                            "format",
                            "fileSize",
                            "visibility",
                            "publishedAt",
                            "viewCount",
                            "likeCount",
                            "favoriteCount",
                            "downloadCount",
                            "sliceTaskId",
                            "printStatus",
                            "createdAt",
                            "updatedAt",
                            "completedAt",
                            "failedAt",
                            "errorMessage"
                          ]
                        }
                      },
                      "required": ["task", "model"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "删除任务",
        "tags": ["任务"],
        "description": "删除指定的生成任务及其关联数据",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "null"
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}/print": {
      "post": {
        "summary": "提交 3D 打印",
        "tags": ["任务"],
        "description": "将模型提交到打印系统进行切片和打印",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "sliceTaskId": {
                          "description": "切片任务 ID",
                          "type": "string"
                        },
                        "message": {
                          "description": "提示信息",
                          "type": "string"
                        }
                      },
                      "required": ["sliceTaskId", "message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}/print-status": {
      "get": {
        "summary": "获取打印状态",
        "tags": ["任务"],
        "description": "查询模型的打印和切片状态",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "printStatus": {
                          "description": "打印状态",
                          "type": "string"
                        },
                        "sliceTaskId": {
                          "description": "切片任务 ID",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "sliceProgress": {
                          "description": "切片进度 (0-100)",
                          "anyOf": [
                            {
                              "minimum": 0,
                              "maximum": 100,
                              "type": "integer"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": ["printStatus", "sliceTaskId", "sliceProgress"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}/status": {
      "get": {
        "summary": "获取任务状态（轮询）",
        "tags": ["任务"],
        "description": "轮询获取任务的最新状态，替代 SSE。支持条件查询（since 参数），仅返回有变更的数据",
        "parameters": [
          {
            "schema": {
              "format": "date-time",
              "type": "string"
            },
            "in": "query",
            "name": "since",
            "required": false,
            "description": "上次查询的 updatedAt 时间，如果数据未更新则返回 304"
          },
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "allOf": [
                        {
                          "description": "包含图片的生成任务",
                          "type": "object",
                          "allOf": [
                            {
                              "description": "生成任务实体",
                              "type": "object",
                              "properties": {
                                "id": {
                                  "description": "任务 ID",
                                  "type": "string"
                                },
                                "externalUserId": {
                                  "description": "外部用户 ID",
                                  "type": "string"
                                },
                                "originalPrompt": {
                                  "description": "用户原始输入的提示词",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                },
                                "status": {
                                  "description": "请求状态",
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_PENDING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_GENERATING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_COMPLETED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_FAILED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_PENDING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_GENERATING"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_COMPLETED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_FAILED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["COMPLETED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["FAILED"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["CANCELLED"]
                                    }
                                  ]
                                },
                                "phase": {
                                  "description": "请求阶段",
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "enum": ["IMAGE_GENERATION"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["AWAITING_SELECTION"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["MODEL_GENERATION"]
                                    },
                                    {
                                      "type": "string",
                                      "enum": ["COMPLETED"]
                                    }
                                  ]
                                },
                                "selectedImageIndex": {
                                  "description": "用户选择的图片索引 (0-3)",
                                  "anyOf": [
                                    {
                                      "minimum": 0,
                                      "maximum": 3,
                                      "type": "integer"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                },
                                "createdAt": {
                                  "format": "date-time",
                                  "description": "创建时间",
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "format": "date-time",
                                  "description": "更新时间",
                                  "type": "string"
                                },
                                "completedAt": {
                                  "description": "完成时间",
                                  "anyOf": [
                                    {
                                      "format": "date-time",
                                      "type": "string"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "externalUserId",
                                "originalPrompt",
                                "status",
                                "phase",
                                "selectedImageIndex",
                                "createdAt",
                                "updatedAt",
                                "completedAt"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "images": {
                                  "description": "关联的图片列表 (最多 4 张)",
                                  "type": "array",
                                  "items": {
                                    "description": "生成图片实体",
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "description": "图片 ID",
                                        "type": "string"
                                      },
                                      "requestId": {
                                        "description": "所属任务 ID",
                                        "type": "string"
                                      },
                                      "index": {
                                        "minimum": 0,
                                        "maximum": 3,
                                        "description": "图片索引 (0-3)",
                                        "type": "integer"
                                      },
                                      "imageUrl": {
                                        "description": "图片 URL",
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "imagePrompt": {
                                        "description": "图片生成提示词",
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "imageStatus": {
                                        "description": "图片状态",
                                        "anyOf": [
                                          {
                                            "type": "string",
                                            "enum": ["PENDING"]
                                          },
                                          {
                                            "type": "string",
                                            "enum": ["GENERATING"]
                                          },
                                          {
                                            "type": "string",
                                            "enum": ["COMPLETED"]
                                          },
                                          {
                                            "type": "string",
                                            "enum": ["FAILED"]
                                          }
                                        ]
                                      },
                                      "createdAt": {
                                        "format": "date-time",
                                        "description": "创建时间",
                                        "type": "string"
                                      },
                                      "completedAt": {
                                        "description": "完成时间",
                                        "anyOf": [
                                          {
                                            "format": "date-time",
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "failedAt": {
                                        "description": "失败时间",
                                        "anyOf": [
                                          {
                                            "format": "date-time",
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "errorMessage": {
                                        "description": "错误信息",
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "requestId",
                                      "index",
                                      "imageUrl",
                                      "imagePrompt",
                                      "imageStatus",
                                      "createdAt",
                                      "completedAt",
                                      "failedAt",
                                      "errorMessage"
                                    ]
                                  }
                                }
                              },
                              "required": ["images"]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "model": {
                              "description": "关联的 3D 模型（如有）",
                              "anyOf": [
                                {
                                  "description": "3D 模型实体",
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "description": "模型 ID",
                                      "type": "string"
                                    },
                                    "externalUserId": {
                                      "description": "所属用户 ID",
                                      "type": "string"
                                    },
                                    "source": {
                                      "description": "模型来源",
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "enum": ["AI_GENERATED"]
                                        },
                                        {
                                          "type": "string",
                                          "enum": ["USER_UPLOADED"]
                                        }
                                      ]
                                    },
                                    "requestId": {
                                      "description": "关联的生成请求 ID (AI 生成时)",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "sourceImageId": {
                                      "description": "来源图片 ID (AI 生成时)",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "name": {
                                      "description": "模型名称",
                                      "type": "string"
                                    },
                                    "description": {
                                      "description": "模型描述",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "modelUrl": {
                                      "description": "模型文件 URL",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "mtlUrl": {
                                      "description": "MTL 材质文件 URL (OBJ 格式)",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "textureUrl": {
                                      "description": "纹理图片 URL (OBJ 格式)",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "previewImageUrl": {
                                      "description": "预览图 URL",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "format": {
                                      "default": "OBJ",
                                      "description": "模型格式",
                                      "type": "string"
                                    },
                                    "fileSize": {
                                      "description": "文件大小 (字节)",
                                      "anyOf": [
                                        {
                                          "minimum": 0,
                                          "type": "integer"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "visibility": {
                                      "description": "模型可见性",
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "enum": ["PRIVATE"]
                                        },
                                        {
                                          "type": "string",
                                          "enum": ["PUBLIC"]
                                        }
                                      ]
                                    },
                                    "publishedAt": {
                                      "description": "发布时间",
                                      "anyOf": [
                                        {
                                          "format": "date-time",
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "viewCount": {
                                      "minimum": 0,
                                      "default": 0,
                                      "description": "浏览次数",
                                      "type": "integer"
                                    },
                                    "likeCount": {
                                      "minimum": 0,
                                      "default": 0,
                                      "description": "点赞数",
                                      "type": "integer"
                                    },
                                    "favoriteCount": {
                                      "minimum": 0,
                                      "default": 0,
                                      "description": "收藏数",
                                      "type": "integer"
                                    },
                                    "downloadCount": {
                                      "minimum": 0,
                                      "default": 0,
                                      "description": "下载次数",
                                      "type": "integer"
                                    },
                                    "sliceTaskId": {
                                      "description": "切片任务 ID",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "printStatus": {
                                      "description": "打印状态",
                                      "anyOf": [
                                        {
                                          "description": "打印状态",
                                          "anyOf": [
                                            {
                                              "type": "string",
                                              "enum": ["NOT_STARTED"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["SLICING"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["SLICE_COMPLETE"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["PRINTING"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["PRINT_COMPLETE"]
                                            },
                                            {
                                              "type": "string",
                                              "enum": ["FAILED"]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "createdAt": {
                                      "format": "date-time",
                                      "description": "创建时间",
                                      "type": "string"
                                    },
                                    "updatedAt": {
                                      "format": "date-time",
                                      "description": "更新时间",
                                      "type": "string"
                                    },
                                    "completedAt": {
                                      "description": "完成时间",
                                      "anyOf": [
                                        {
                                          "format": "date-time",
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "failedAt": {
                                      "description": "失败时间",
                                      "anyOf": [
                                        {
                                          "format": "date-time",
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "errorMessage": {
                                      "description": "错误信息",
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "externalUserId",
                                    "source",
                                    "requestId",
                                    "sourceImageId",
                                    "name",
                                    "description",
                                    "modelUrl",
                                    "mtlUrl",
                                    "textureUrl",
                                    "previewImageUrl",
                                    "format",
                                    "fileSize",
                                    "visibility",
                                    "publishedAt",
                                    "viewCount",
                                    "likeCount",
                                    "favoriteCount",
                                    "downloadCount",
                                    "sliceTaskId",
                                    "printStatus",
                                    "createdAt",
                                    "updatedAt",
                                    "completedAt",
                                    "failedAt",
                                    "errorMessage"
                                  ]
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            }
                          },
                          "required": ["model"]
                        }
                      ]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "304": {
            "description": "Not Modified - 数据未更新",
            "content": {
              "application/json": {
                "schema": {
                  "description": "Not Modified - 数据未更新",
                  "type": "object",
                  "properties": {}
                }
              }
            }
          },
          "404": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 错误响应（服务端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 错误响应（服务端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "错误状态（服务端错误）",
                      "type": "string",
                      "enum": ["error"]
                    },
                    "message": {
                      "description": "错误信息",
                      "type": "string"
                    },
                    "code": {
                      "description": "错误代码",
                      "type": "string"
                    },
                    "data": {
                      "description": "附加错误数据"
                    }
                  },
                  "required": ["status", "message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/gallery/models": {
      "get": {
        "summary": "获取公开模型列表",
        "tags": ["模型"],
        "description": "分页获取所有公开的 3D 模型",
        "parameters": [
          {
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "type": "integer"
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "每页数量 (1-100，默认 20)"
          },
          {
            "schema": {
              "minimum": 0,
              "default": 0,
              "type": "integer"
            },
            "in": "query",
            "name": "offset",
            "required": false,
            "description": "偏移量 (默认 0)"
          },
          {
            "schema": {
              "default": "latest",
              "anyOf": [
                {
                  "type": "string",
                  "enum": ["latest"]
                },
                {
                  "type": "string",
                  "enum": ["popular"]
                },
                {
                  "type": "string",
                  "enum": ["liked"]
                }
              ]
            },
            "in": "query",
            "name": "sort",
            "required": false,
            "description": "排序方式：latest(最新) | popular(热门) | liked(点赞最多)"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 列表响应（带总数）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 列表响应（带总数）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "items": {
                          "description": "数据列表",
                          "type": "array",
                          "items": {
                            "description": "模型摘要信息",
                            "type": "object",
                            "properties": {
                              "id": {
                                "description": "模型 ID",
                                "type": "string"
                              },
                              "name": {
                                "description": "模型名称",
                                "type": "string"
                              },
                              "previewImageUrl": {
                                "description": "预览图 URL",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "visibility": {
                                "description": "模型可见性",
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "enum": ["PRIVATE"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["PUBLIC"]
                                  }
                                ]
                              },
                              "likeCount": {
                                "minimum": 0,
                                "type": "integer"
                              },
                              "favoriteCount": {
                                "minimum": 0,
                                "type": "integer"
                              },
                              "downloadCount": {
                                "minimum": 0,
                                "type": "integer"
                              },
                              "createdAt": {
                                "format": "date-time",
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "previewImageUrl",
                              "visibility",
                              "likeCount",
                              "favoriteCount",
                              "downloadCount",
                              "createdAt"
                            ],
                            "title": "ModelSummary"
                          }
                        },
                        "total": {
                          "minimum": 0,
                          "description": "总数",
                          "type": "integer"
                        }
                      },
                      "required": ["items", "total"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/gallery/models/{id}": {
      "get": {
        "summary": "获取模型详情",
        "tags": ["模型"],
        "description": "获取指定 3D 模型的详细信息",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "description": "3D 模型实体",
                      "type": "object",
                      "properties": {
                        "id": {
                          "description": "模型 ID",
                          "type": "string"
                        },
                        "externalUserId": {
                          "description": "所属用户 ID",
                          "type": "string"
                        },
                        "source": {
                          "description": "模型来源",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["AI_GENERATED"]
                            },
                            {
                              "type": "string",
                              "enum": ["USER_UPLOADED"]
                            }
                          ]
                        },
                        "requestId": {
                          "description": "关联的生成请求 ID (AI 生成时)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "sourceImageId": {
                          "description": "来源图片 ID (AI 生成时)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "name": {
                          "description": "模型名称",
                          "type": "string"
                        },
                        "description": {
                          "description": "模型描述",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "modelUrl": {
                          "description": "模型文件 URL",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "mtlUrl": {
                          "description": "MTL 材质文件 URL (OBJ 格式)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "textureUrl": {
                          "description": "纹理图片 URL (OBJ 格式)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "previewImageUrl": {
                          "description": "预览图 URL",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "format": {
                          "default": "OBJ",
                          "description": "模型格式",
                          "type": "string"
                        },
                        "fileSize": {
                          "description": "文件大小 (字节)",
                          "anyOf": [
                            {
                              "minimum": 0,
                              "type": "integer"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "visibility": {
                          "description": "模型可见性",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["PRIVATE"]
                            },
                            {
                              "type": "string",
                              "enum": ["PUBLIC"]
                            }
                          ]
                        },
                        "publishedAt": {
                          "description": "发布时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "viewCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "浏览次数",
                          "type": "integer"
                        },
                        "likeCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "点赞数",
                          "type": "integer"
                        },
                        "favoriteCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "收藏数",
                          "type": "integer"
                        },
                        "downloadCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "下载次数",
                          "type": "integer"
                        },
                        "sliceTaskId": {
                          "description": "切片任务 ID",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "printStatus": {
                          "description": "打印状态",
                          "anyOf": [
                            {
                              "description": "打印状态",
                              "anyOf": [
                                {
                                  "type": "string",
                                  "enum": ["NOT_STARTED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["SLICING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["SLICE_COMPLETE"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["PRINTING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["PRINT_COMPLETE"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["FAILED"]
                                }
                              ]
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "createdAt": {
                          "format": "date-time",
                          "description": "创建时间",
                          "type": "string"
                        },
                        "updatedAt": {
                          "format": "date-time",
                          "description": "更新时间",
                          "type": "string"
                        },
                        "completedAt": {
                          "description": "完成时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "failedAt": {
                          "description": "失败时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "errorMessage": {
                          "description": "错误信息",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": [
                        "id",
                        "externalUserId",
                        "source",
                        "requestId",
                        "sourceImageId",
                        "name",
                        "description",
                        "modelUrl",
                        "mtlUrl",
                        "textureUrl",
                        "previewImageUrl",
                        "format",
                        "fileSize",
                        "visibility",
                        "publishedAt",
                        "viewCount",
                        "likeCount",
                        "favoriteCount",
                        "downloadCount",
                        "sliceTaskId",
                        "printStatus",
                        "createdAt",
                        "updatedAt",
                        "completedAt",
                        "failedAt",
                        "errorMessage"
                      ]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/gallery/models/{id}/download": {
      "post": {
        "summary": "下载模型",
        "tags": ["模型"],
        "description": "增加下载计数",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "提示信息",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/gallery/models/{id}/interactions": {
      "get": {
        "summary": "获取用户交互状态",
        "tags": ["交互"],
        "description": "获取当前用户对指定模型的点赞和收藏状态",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isAuthenticated": {
                          "description": "用户是否已登录",
                          "type": "boolean"
                        },
                        "interactions": {
                          "description": "交互类型数组 ([\"LIKE\"] | [\"FAVORITE\"] | [\"LIKE\", \"FAVORITE\"] | [])",
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "isLiked": {
                          "description": "是否已点赞 (仅登录时返回)",
                          "type": "boolean"
                        },
                        "isFavorited": {
                          "description": "是否已收藏 (仅登录时返回)",
                          "type": "boolean"
                        }
                      },
                      "required": ["isAuthenticated", "interactions"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "创建交互",
        "tags": ["交互"],
        "description": "对模型进行点赞或收藏操作",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "description": "创建交互请求",
                "type": "object",
                "properties": {
                  "type": {
                    "description": "交互类型",
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": ["LIKE"]
                      },
                      {
                        "type": "string",
                        "enum": ["FAVORITE"]
                      }
                    ],
                    "title": "InteractionType"
                  }
                },
                "required": ["type"]
              }
            }
          },
          "required": true,
          "description": "创建交互请求"
        },
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "201": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "description": "模型交互实体",
                      "type": "object",
                      "properties": {
                        "id": {
                          "description": "交互 ID",
                          "type": "string"
                        },
                        "externalUserId": {
                          "description": "用户 ID",
                          "type": "string"
                        },
                        "modelId": {
                          "description": "模型 ID",
                          "type": "string"
                        },
                        "type": {
                          "description": "交互类型",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["LIKE"]
                            },
                            {
                              "type": "string",
                              "enum": ["FAVORITE"]
                            }
                          ]
                        },
                        "createdAt": {
                          "format": "date-time",
                          "description": "创建时间",
                          "type": "string"
                        }
                      },
                      "required": ["id", "externalUserId", "modelId", "type", "createdAt"],
                      "title": "InteractionEntity"
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/gallery/models/batch-interactions": {
      "post": {
        "summary": "批量获取交互状态",
        "tags": ["交互"],
        "description": "批量获取当前用户对多个模型的交互状态",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "modelIds": {
                    "minItems": 1,
                    "maxItems": 100,
                    "description": "模型 ID 列表 (1-100 个)",
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": ["modelIds"]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isAuthenticated": {
                          "description": "用户是否已登录",
                          "type": "boolean"
                        },
                        "interactions": {
                          "description": "交互状态映射 { [modelId]: { isLiked: boolean, isFavorited: boolean } }",
                          "type": "object",
                          "additionalProperties": {
                            "type": "object",
                            "properties": {
                              "isLiked": {
                                "description": "是否已点赞",
                                "type": "boolean"
                              },
                              "isFavorited": {
                                "description": "是否已收藏",
                                "type": "boolean"
                              }
                            },
                            "required": ["isLiked", "isFavorited"]
                          }
                        }
                      },
                      "required": ["isAuthenticated", "interactions"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/users/models": {
      "get": {
        "summary": "获取当前用户的模型列表",
        "tags": ["模型管理"],
        "description": "获取登录用户创建的所有模型，支持按可见性筛选和排序（需要认证）",
        "parameters": [
          {
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "enum": ["PRIVATE"]
                },
                {
                  "type": "string",
                  "enum": ["PUBLIC"]
                }
              ]
            },
            "in": "query",
            "name": "visibility",
            "required": false,
            "description": "模型可见性"
          },
          {
            "schema": {
              "default": "latest",
              "anyOf": [
                {
                  "type": "string",
                  "enum": ["latest"]
                },
                {
                  "type": "string",
                  "enum": ["name"]
                },
                {
                  "type": "string",
                  "enum": ["popular"]
                }
              ]
            },
            "in": "query",
            "name": "sortBy",
            "required": false,
            "description": "排序方式：latest(最新) | name(名称) | popular(热门)"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "每页数量（默认 20）"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "offset",
            "required": false,
            "description": "偏移量（默认 0）"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "items": {
                          "description": "模型列表",
                          "type": "array",
                          "items": {
                            "description": "3D 模型实体",
                            "type": "object",
                            "properties": {
                              "id": {
                                "description": "模型 ID",
                                "type": "string"
                              },
                              "externalUserId": {
                                "description": "所属用户 ID",
                                "type": "string"
                              },
                              "source": {
                                "description": "模型来源",
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "enum": ["AI_GENERATED"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["USER_UPLOADED"]
                                  }
                                ]
                              },
                              "requestId": {
                                "description": "关联的生成请求 ID (AI 生成时)",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "sourceImageId": {
                                "description": "来源图片 ID (AI 生成时)",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "name": {
                                "description": "模型名称",
                                "type": "string"
                              },
                              "description": {
                                "description": "模型描述",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "modelUrl": {
                                "description": "模型文件 URL",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "mtlUrl": {
                                "description": "MTL 材质文件 URL (OBJ 格式)",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "textureUrl": {
                                "description": "纹理图片 URL (OBJ 格式)",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "previewImageUrl": {
                                "description": "预览图 URL",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "format": {
                                "default": "OBJ",
                                "description": "模型格式",
                                "type": "string"
                              },
                              "fileSize": {
                                "description": "文件大小 (字节)",
                                "anyOf": [
                                  {
                                    "minimum": 0,
                                    "type": "integer"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "visibility": {
                                "description": "模型可见性",
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "enum": ["PRIVATE"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["PUBLIC"]
                                  }
                                ]
                              },
                              "publishedAt": {
                                "description": "发布时间",
                                "anyOf": [
                                  {
                                    "format": "date-time",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "viewCount": {
                                "minimum": 0,
                                "default": 0,
                                "description": "浏览次数",
                                "type": "integer"
                              },
                              "likeCount": {
                                "minimum": 0,
                                "default": 0,
                                "description": "点赞数",
                                "type": "integer"
                              },
                              "favoriteCount": {
                                "minimum": 0,
                                "default": 0,
                                "description": "收藏数",
                                "type": "integer"
                              },
                              "downloadCount": {
                                "minimum": 0,
                                "default": 0,
                                "description": "下载次数",
                                "type": "integer"
                              },
                              "sliceTaskId": {
                                "description": "切片任务 ID",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "printStatus": {
                                "description": "打印状态",
                                "anyOf": [
                                  {
                                    "description": "打印状态",
                                    "anyOf": [
                                      {
                                        "type": "string",
                                        "enum": ["NOT_STARTED"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["SLICING"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["SLICE_COMPLETE"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["PRINTING"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["PRINT_COMPLETE"]
                                      },
                                      {
                                        "type": "string",
                                        "enum": ["FAILED"]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "createdAt": {
                                "format": "date-time",
                                "description": "创建时间",
                                "type": "string"
                              },
                              "updatedAt": {
                                "format": "date-time",
                                "description": "更新时间",
                                "type": "string"
                              },
                              "completedAt": {
                                "description": "完成时间",
                                "anyOf": [
                                  {
                                    "format": "date-time",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "failedAt": {
                                "description": "失败时间",
                                "anyOf": [
                                  {
                                    "format": "date-time",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "errorMessage": {
                                "description": "错误信息",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "externalUserId",
                              "source",
                              "requestId",
                              "sourceImageId",
                              "name",
                              "description",
                              "modelUrl",
                              "mtlUrl",
                              "textureUrl",
                              "previewImageUrl",
                              "format",
                              "fileSize",
                              "visibility",
                              "publishedAt",
                              "viewCount",
                              "likeCount",
                              "favoriteCount",
                              "downloadCount",
                              "sliceTaskId",
                              "printStatus",
                              "createdAt",
                              "updatedAt",
                              "completedAt",
                              "failedAt",
                              "errorMessage"
                            ]
                          }
                        },
                        "total": {
                          "minimum": 0,
                          "description": "总数",
                          "type": "integer"
                        },
                        "publicCount": {
                          "minimum": 0,
                          "description": "公开模型数量",
                          "type": "integer"
                        },
                        "hasMore": {
                          "description": "是否还有更多数据",
                          "type": "boolean"
                        }
                      },
                      "required": ["items", "total", "publicCount", "hasMore"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 错误响应（服务端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 错误响应（服务端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "错误状态（服务端错误）",
                      "type": "string",
                      "enum": ["error"]
                    },
                    "message": {
                      "description": "错误信息",
                      "type": "string"
                    },
                    "code": {
                      "description": "错误代码",
                      "type": "string"
                    },
                    "data": {
                      "description": "附加错误数据"
                    }
                  },
                  "required": ["status", "message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/models/{id}": {
      "patch": {
        "summary": "更新模型信息",
        "tags": ["模型管理"],
        "description": "更新模型的名称和描述（需要认证且为模型拥有者）",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "minLength": 1,
                    "maxLength": 100,
                    "description": "模型名称（1-100字符）",
                    "type": "string"
                  },
                  "description": {
                    "maxLength": 500,
                    "description": "模型描述（最多500字符）",
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "description": "3D 模型实体",
                      "type": "object",
                      "properties": {
                        "id": {
                          "description": "模型 ID",
                          "type": "string"
                        },
                        "externalUserId": {
                          "description": "所属用户 ID",
                          "type": "string"
                        },
                        "source": {
                          "description": "模型来源",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["AI_GENERATED"]
                            },
                            {
                              "type": "string",
                              "enum": ["USER_UPLOADED"]
                            }
                          ]
                        },
                        "requestId": {
                          "description": "关联的生成请求 ID (AI 生成时)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "sourceImageId": {
                          "description": "来源图片 ID (AI 生成时)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "name": {
                          "description": "模型名称",
                          "type": "string"
                        },
                        "description": {
                          "description": "模型描述",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "modelUrl": {
                          "description": "模型文件 URL",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "mtlUrl": {
                          "description": "MTL 材质文件 URL (OBJ 格式)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "textureUrl": {
                          "description": "纹理图片 URL (OBJ 格式)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "previewImageUrl": {
                          "description": "预览图 URL",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "format": {
                          "default": "OBJ",
                          "description": "模型格式",
                          "type": "string"
                        },
                        "fileSize": {
                          "description": "文件大小 (字节)",
                          "anyOf": [
                            {
                              "minimum": 0,
                              "type": "integer"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "visibility": {
                          "description": "模型可见性",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["PRIVATE"]
                            },
                            {
                              "type": "string",
                              "enum": ["PUBLIC"]
                            }
                          ]
                        },
                        "publishedAt": {
                          "description": "发布时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "viewCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "浏览次数",
                          "type": "integer"
                        },
                        "likeCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "点赞数",
                          "type": "integer"
                        },
                        "favoriteCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "收藏数",
                          "type": "integer"
                        },
                        "downloadCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "下载次数",
                          "type": "integer"
                        },
                        "sliceTaskId": {
                          "description": "切片任务 ID",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "printStatus": {
                          "description": "打印状态",
                          "anyOf": [
                            {
                              "description": "打印状态",
                              "anyOf": [
                                {
                                  "type": "string",
                                  "enum": ["NOT_STARTED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["SLICING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["SLICE_COMPLETE"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["PRINTING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["PRINT_COMPLETE"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["FAILED"]
                                }
                              ]
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "createdAt": {
                          "format": "date-time",
                          "description": "创建时间",
                          "type": "string"
                        },
                        "updatedAt": {
                          "format": "date-time",
                          "description": "更新时间",
                          "type": "string"
                        },
                        "completedAt": {
                          "description": "完成时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "failedAt": {
                          "description": "失败时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "errorMessage": {
                          "description": "错误信息",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": [
                        "id",
                        "externalUserId",
                        "source",
                        "requestId",
                        "sourceImageId",
                        "name",
                        "description",
                        "modelUrl",
                        "mtlUrl",
                        "textureUrl",
                        "previewImageUrl",
                        "format",
                        "fileSize",
                        "visibility",
                        "publishedAt",
                        "viewCount",
                        "likeCount",
                        "favoriteCount",
                        "downloadCount",
                        "sliceTaskId",
                        "printStatus",
                        "createdAt",
                        "updatedAt",
                        "completedAt",
                        "failedAt",
                        "errorMessage"
                      ]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "400": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "403": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "404": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 错误响应（服务端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 错误响应（服务端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "错误状态（服务端错误）",
                      "type": "string",
                      "enum": ["error"]
                    },
                    "message": {
                      "description": "错误信息",
                      "type": "string"
                    },
                    "code": {
                      "description": "错误代码",
                      "type": "string"
                    },
                    "data": {
                      "description": "附加错误数据"
                    }
                  },
                  "required": ["status", "message"]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "删除模型",
        "tags": ["模型管理"],
        "description": "删除指定的模型（需要认证且为模型拥有者）",
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "提示信息",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "403": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "404": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 错误响应（服务端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 错误响应（服务端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "错误状态（服务端错误）",
                      "type": "string",
                      "enum": ["error"]
                    },
                    "message": {
                      "description": "错误信息",
                      "type": "string"
                    },
                    "code": {
                      "description": "错误代码",
                      "type": "string"
                    },
                    "data": {
                      "description": "附加错误数据"
                    }
                  },
                  "required": ["status", "message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/models/{id}/visibility": {
      "patch": {
        "summary": "修改模型可见性",
        "tags": ["模型管理"],
        "description": "将模型设置为公开或私有（需要认证且为模型拥有者）",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "visibility": {
                    "description": "模型可见性",
                    "anyOf": [
                      {
                        "type": "string",
                        "enum": ["PRIVATE"]
                      },
                      {
                        "type": "string",
                        "enum": ["PUBLIC"]
                      }
                    ]
                  }
                },
                "required": ["visibility"]
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "minLength": 1,
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "资源 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "description": "3D 模型实体",
                      "type": "object",
                      "properties": {
                        "id": {
                          "description": "模型 ID",
                          "type": "string"
                        },
                        "externalUserId": {
                          "description": "所属用户 ID",
                          "type": "string"
                        },
                        "source": {
                          "description": "模型来源",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["AI_GENERATED"]
                            },
                            {
                              "type": "string",
                              "enum": ["USER_UPLOADED"]
                            }
                          ]
                        },
                        "requestId": {
                          "description": "关联的生成请求 ID (AI 生成时)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "sourceImageId": {
                          "description": "来源图片 ID (AI 生成时)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "name": {
                          "description": "模型名称",
                          "type": "string"
                        },
                        "description": {
                          "description": "模型描述",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "modelUrl": {
                          "description": "模型文件 URL",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "mtlUrl": {
                          "description": "MTL 材质文件 URL (OBJ 格式)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "textureUrl": {
                          "description": "纹理图片 URL (OBJ 格式)",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "previewImageUrl": {
                          "description": "预览图 URL",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "format": {
                          "default": "OBJ",
                          "description": "模型格式",
                          "type": "string"
                        },
                        "fileSize": {
                          "description": "文件大小 (字节)",
                          "anyOf": [
                            {
                              "minimum": 0,
                              "type": "integer"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "visibility": {
                          "description": "模型可见性",
                          "anyOf": [
                            {
                              "type": "string",
                              "enum": ["PRIVATE"]
                            },
                            {
                              "type": "string",
                              "enum": ["PUBLIC"]
                            }
                          ]
                        },
                        "publishedAt": {
                          "description": "发布时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "viewCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "浏览次数",
                          "type": "integer"
                        },
                        "likeCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "点赞数",
                          "type": "integer"
                        },
                        "favoriteCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "收藏数",
                          "type": "integer"
                        },
                        "downloadCount": {
                          "minimum": 0,
                          "default": 0,
                          "description": "下载次数",
                          "type": "integer"
                        },
                        "sliceTaskId": {
                          "description": "切片任务 ID",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "printStatus": {
                          "description": "打印状态",
                          "anyOf": [
                            {
                              "description": "打印状态",
                              "anyOf": [
                                {
                                  "type": "string",
                                  "enum": ["NOT_STARTED"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["SLICING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["SLICE_COMPLETE"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["PRINTING"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["PRINT_COMPLETE"]
                                },
                                {
                                  "type": "string",
                                  "enum": ["FAILED"]
                                }
                              ]
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "createdAt": {
                          "format": "date-time",
                          "description": "创建时间",
                          "type": "string"
                        },
                        "updatedAt": {
                          "format": "date-time",
                          "description": "更新时间",
                          "type": "string"
                        },
                        "completedAt": {
                          "description": "完成时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "failedAt": {
                          "description": "失败时间",
                          "anyOf": [
                            {
                              "format": "date-time",
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "errorMessage": {
                          "description": "错误信息",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": [
                        "id",
                        "externalUserId",
                        "source",
                        "requestId",
                        "sourceImageId",
                        "name",
                        "description",
                        "modelUrl",
                        "mtlUrl",
                        "textureUrl",
                        "previewImageUrl",
                        "format",
                        "fileSize",
                        "visibility",
                        "publishedAt",
                        "viewCount",
                        "likeCount",
                        "favoriteCount",
                        "downloadCount",
                        "sliceTaskId",
                        "printStatus",
                        "createdAt",
                        "updatedAt",
                        "completedAt",
                        "failedAt",
                        "errorMessage"
                      ]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "400": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "401": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "403": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "404": {
            "description": "JSend 失败响应（客户端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 失败响应（客户端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "失败状态（客户端错误）",
                      "type": "string",
                      "enum": ["fail"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "description": "错误信息",
                          "type": "string"
                        },
                        "code": {
                          "description": "错误代码",
                          "type": "string"
                        }
                      },
                      "required": ["message"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          },
          "500": {
            "description": "JSend 错误响应（服务端错误）",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 错误响应（服务端错误）",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "错误状态（服务端错误）",
                      "type": "string",
                      "enum": ["error"]
                    },
                    "message": {
                      "description": "错误信息",
                      "type": "string"
                    },
                    "code": {
                      "description": "错误代码",
                      "type": "string"
                    },
                    "data": {
                      "description": "附加错误数据"
                    }
                  },
                  "required": ["status", "message"]
                }
              }
            }
          }
        }
      }
    },
    "/api/workers/status": {
      "get": {
        "summary": "获取 Worker 状态",
        "tags": ["Worker"],
        "description": "获取所有 Worker（Image Worker、Model Worker）的运行状态和队列信息",
        "responses": {
          "200": {
            "description": "JSend 成功响应",
            "content": {
              "application/json": {
                "schema": {
                  "description": "JSend 成功响应",
                  "type": "object",
                  "properties": {
                    "status": {
                      "description": "成功状态",
                      "type": "string",
                      "enum": ["success"]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "workers": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "description": "Worker 名称",
                                "type": "string"
                              },
                              "status": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "enum": ["running"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["stopped"]
                                  },
                                  {
                                    "type": "string",
                                    "enum": ["error"]
                                  }
                                ]
                              },
                              "queueName": {
                                "description": "队列名称",
                                "type": "string"
                              },
                              "concurrency": {
                                "minimum": 1,
                                "description": "并发数",
                                "type": "integer"
                              },
                              "stats": {
                                "type": "object",
                                "properties": {
                                  "active": {
                                    "minimum": 0,
                                    "description": "正在处理的任务数",
                                    "type": "integer"
                                  },
                                  "waiting": {
                                    "minimum": 0,
                                    "description": "等待中的任务数",
                                    "type": "integer"
                                  },
                                  "completed": {
                                    "minimum": 0,
                                    "description": "已完成的任务数",
                                    "type": "integer"
                                  },
                                  "failed": {
                                    "minimum": 0,
                                    "description": "失败的任务数",
                                    "type": "integer"
                                  }
                                },
                                "required": ["active", "waiting", "completed", "failed"]
                              }
                            },
                            "required": ["name", "status", "queueName", "concurrency", "stats"]
                          }
                        }
                      },
                      "required": ["workers"]
                    }
                  },
                  "required": ["status", "data"]
                }
              }
            }
          }
        }
      }
    },
    "/api/openapi": {
      "get": {
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "开发环境"
    },
    {
      "url": "http://localhost:3001",
      "description": "测试环境"
    }
  ],
  "tags": [
    {
      "name": "认证",
      "description": "用户认证相关接口 - 邮箱验证码登录"
    },
    {
      "name": "任务",
      "description": "生成任务相关接口 - 创建和管理图片/模型生成任务"
    },
    {
      "name": "模型",
      "description": "3D 模型管理接口 - 查看、发布、更新模型"
    },
    {
      "name": "交互",
      "description": "用户交互接口 - 点赞、收藏功能"
    },
    {
      "name": "健康检查",
      "description": "系统健康检查接口"
    }
  ]
}
